<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - Ramashrey Dosa Centre</title>
    <link rel="stylesheet" href="signupStyles.css">
    <style>
        .error-msg {
            color: #e53e3e;
            font-size: 0.82rem;
            margin-top: 4px;
            margin-bottom: 6px;
            display: none;
            align-items: center;
            gap: 5px;
        }
        .error-msg.visible {
            display: flex;
        }
        .error-msg::before {
            content: "⚠";
            font-size: 0.9rem;
        }
        input.invalid {
            border: 2px solid #e53e3e !important;
            background-color: #fff5f5 !important;
        }
        input.valid {
            border: 2px solid #38a169 !important;
            background-color: #f0fff4 !important;
        }
        .password-rules {
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
            margin-bottom: 6px;
            display: none;
        }
        .password-rules.visible {
            display: block;
        }
        .password-rules ul {
            list-style: none;
            padding: 0;
            margin: 4px 0 0 0;
        }
        .password-rules ul li {
            padding: 2px 0;
        }
        .password-rules ul li.rule-pass {
            color: #38a169;
        }
        .password-rules ul li.rule-pass::before {
            content: "✓ ";
        }
        .password-rules ul li.rule-fail {
            color: #e53e3e;
        }
        .password-rules ul li.rule-fail::before {
            content: "✗ ";
        }
    </style>
</head>

<body>

<header>
    <h1>Ramashrey</h1>
    <p>Join our family today!</p>
</header>

<nav>
    <table cellpadding="10">
        <tr>
            <td><a href="#signup">Sign Up</a></td>
        </tr>
    </table>
</nav>

<div class="signup-container">
    <form id="signup" action="index.html" method="get" novalidate>
        <h2>Create Your Account</h2>
        <p class="form-subtitle">Sign up to receive exclusive offers and updates!</p>

        <div class="form-section">
            <div class="section-indicator">Personal Information</div>

            <label for="firstname">First Name: <span class="required">*</span></label>
            <input type="text" name="firstname" id="firstname" placeholder="Enter your first name" required>
            <span class="error-msg" id="firstname-error">First name is required.</span>

            <label for="lastname">Last Name: <span class="required">*</span></label>
            <input type="text" name="lastname" id="lastname" placeholder="Enter your last name" required>
            <span class="error-msg" id="lastname-error">Last name is required.</span>

            <label for="email">Email Address: <span class="required">*</span></label>
            <input type="email" name="email" id="email" placeholder="Enter your email" required>
            <span class="error-msg" id="email-error">Please enter a valid email address.</span>

            <label for="phone">Phone Number: <span class="required">*</span></label>
            <input type="tel" name="phone" id="phone" placeholder="Enter your 10-digit phone number" required>
            <span class="error-msg" id="phone-error">Please enter a valid 10-digit phone number (digits only).</span>

            <label for="dob">Date of Birth: <span class="required">*</span></label>
            <input type="date" name="dob" id="dob" required>
            <span class="error-msg" id="dob-error">Date of birth is required.</span>
        </div>

        <div class="form-section">
            <div class="section-indicator">Account Details</div>

            <label for="username">Username: <span class="required">*</span></label>
            <input type="text" name="username" id="username" placeholder="Choose a username" required>
            <span class="error-msg" id="username-error">Username is required.</span>

            <label for="password">Password: <span class="required">*</span></label>
            <input type="password" name="password" id="password" placeholder="Create a password" required>
            <div class="password-rules" id="password-rules">
                Password must include:
                <ul>
                    <li id="rule-length" class="rule-fail">At least 8 characters</li>
                    <li id="rule-upper" class="rule-fail">An uppercase letter (A-Z)</li>
                    <li id="rule-lower" class="rule-fail">A lowercase letter (a-z)</li>
                    <li id="rule-number" class="rule-fail">A number (0-9)</li>
                    <li id="rule-special" class="rule-fail">A special character (@, $, !, %, *, ?, &amp;)</li>
                </ul>
            </div>

            <label for="confirm-password">Confirm Password: <span class="required">*</span></label>
            <input type="password" name="confirm-password" id="confirm-password" placeholder="Re-enter your password" required>
            <span class="error-msg" id="confirm-password-error">Passwords do not match.</span>
        </div>

        <div class="form-section">
            <div class="section-indicator">Your Preferences</div>

            <label>Gender:</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" name="gender" value="male" id="male">
                    <label for="male">Male</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="gender" value="female" id="female">
                    <label for="female">Female</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="gender" value="other" id="other">
                    <label for="other">Other</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="gender" value="prefer-not-to-say" id="prefer-not">
                    <label for="prefer-not">Prefer not to say</label>
                </div>
            </div>

            <label>Favorite Dishes: (Select all that apply)</label>
            <div class="checkbox-group">
                <div class="checkbox-option">
                    <input type="checkbox" name="favorites" value="dosa" id="fav-dosa">
                    <label for="fav-dosa">Dosa</label>
                </div>
                <div class="checkbox-option">
                    <input type="checkbox" name="favorites" value="idli" id="fav-idli">
                    <label for="fav-idli">Idli</label>
                </div>
                <div class="checkbox-option">
                    <input type="checkbox" name="favorites" value="vada" id="fav-vada">
                    <label for="fav-vada">Vada</label>
                </div>
                <div class="checkbox-option">
                    <input type="checkbox" name="favorites" value="uttapam" id="fav-uttapam">
                    <label for="fav-uttapam">Uttapam</label>
                </div>
                <div class="checkbox-option">
                    <input type="checkbox" name="favorites" value="sheera" id="fav-sheera">
                    <label for="fav-sheera">Sheera</label>
                </div>
            </div>

            <label for="dietary">Dietary Preferences:</label>
            <select name="dietary" id="dietary">
                <option value="">Select your preference</option>
                <option value="pure-veg">Pure Vegetarian</option>
                <option value="vegan">Vegan</option>
                <option value="jain">Jain</option>
                <option value="no-onion-garlic">No Onion/Garlic</option>
                <option value="other">Other</option>
            </select>
        </div>

        <div class="form-section">
            <div class="section-indicator">Stay Connected</div>

            <div class="checkbox-option-single">
                <input type="checkbox" name="newsletter" value="yes" id="newsletter" checked>
                <label for="newsletter">I want to receive promotional emails and updates about special offers</label>
            </div>

            <div class="checkbox-option-single">
                <input type="checkbox" name="sms-updates" value="yes" id="sms-updates">
                <label for="sms-updates">I want to receive SMS notifications about new menu items</label>
            </div>
        </div>

        <div class="form-section">
            <div class="checkbox-option-single">
                <input type="checkbox" name="terms" value="agree" id="terms" required>
                <label for="terms">I agree to the <a href="#" class="terms-link">Terms and Conditions</a> and <a href="#" class="terms-link">Privacy Policy</a> <span class="required">*</span></label>
            </div>
            <span class="error-msg" id="terms-error">You must agree to the terms and conditions.</span>
        </div>

        <div class="form-submit">
            <input type="submit" value="Create Account ✓">
            <input type="reset" value="Clear Form" id="reset-btn">
        </div>

        <p class="login-link">Already have an account? <a href="#">Log In</a></p>
    </form>
</div>

<footer>
    <p>&copy; Cooked by Harsh and Atharva</p>
</footer>

</body>
</html>

<script>
    // ─── Helper functions ────────────────────────────────────────────────
    function showError(fieldId, errorId) {
        const field = document.getElementById(fieldId);
        field.classList.add("invalid");
        field.classList.remove("valid");
        document.getElementById(errorId).classList.add("visible");
    }

    function clearError(fieldId, errorId) {
        const field = document.getElementById(fieldId);
        field.classList.remove("invalid");
        field.classList.add("valid");
        document.getElementById(errorId).classList.remove("visible");
    }

    document.getElementById("firstname").addEventListener("blur", function () {
        this.value.trim() === "" ? showError("firstname", "firstname-error") : clearError("firstname", "firstname-error");
    });

    document.getElementById("lastname").addEventListener("blur", function () {
        this.value.trim() === "" ? showError("lastname", "lastname-error") : clearError("lastname", "lastname-error");
    });

    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    document.getElementById("email").addEventListener("blur", function () {
        !emailPattern.test(this.value.trim()) ? showError("email", "email-error") : clearError("email", "email-error");
    });
    document.getElementById("email").addEventListener("input", function () {
        if (emailPattern.test(this.value.trim())) clearError("email", "email-error");
    });

    const phonePattern = /^[0-9]{10}$/;

    document.getElementById("phone").addEventListener("blur", function () {
        !phonePattern.test(this.value.trim()) ? showError("phone", "phone-error") : clearError("phone", "phone-error");
    });
    document.getElementById("phone").addEventListener("input", function () {
        if (phonePattern.test(this.value.trim())) clearError("phone", "phone-error");
    });

    document.getElementById("dob").addEventListener("change", function () {
        this.value === "" ? showError("dob", "dob-error") : clearError("dob", "dob-error");
    });

    document.getElementById("username").addEventListener("blur", function () {
        this.value.trim() === "" ? showError("username", "username-error") : clearError("username", "username-error");
    });

    const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;

    document.getElementById("password").addEventListener("focus", function () {
        document.getElementById("password-rules").classList.add("visible");
    });

    document.getElementById("password").addEventListener("input", function () {
        const val = this.value;

        const rules = {
            "rule-length":  val.length >= 8,
            "rule-upper":   /[A-Z]/.test(val),
            "rule-lower":   /[a-z]/.test(val),
            "rule-number":  /\d/.test(val),
            "rule-special": /[@$!%*?&]/.test(val)
        };

        let allPass = true;
        for (const [ruleId, passed] of Object.entries(rules)) {
            const el = document.getElementById(ruleId);
            el.classList.toggle("rule-pass", passed);
            el.classList.toggle("rule-fail", !passed);
            if (!passed) allPass = false;
        }

        this.classList.toggle("valid", allPass);
        this.classList.toggle("invalid", !allPass);

        const confirmVal = document.getElementById("confirm-password").value;
        if (confirmVal !== "") {
            val === confirmVal
                ? clearError("confirm-password", "confirm-password-error")
                : showError("confirm-password", "confirm-password-error");
        }
    });

    ["input", "blur"].forEach(evt => {
        document.getElementById("confirm-password").addEventListener(evt, function () {
            const password = document.getElementById("password").value;
            this.value !== password
                ? showError("confirm-password", "confirm-password-error")
                : clearError("confirm-password", "confirm-password-error");
        });
    });

    document.getElementById("terms").addEventListener("change", function () {
        document.getElementById("terms-error").classList.toggle("visible", !this.checked);
    });

    document.getElementById("reset-btn").addEventListener("click", function () {
        document.querySelectorAll("input").forEach(el => el.classList.remove("valid", "invalid"));
        document.querySelectorAll(".error-msg").forEach(el => el.classList.remove("visible"));
        document.getElementById("password-rules").classList.remove("visible");
        document.querySelectorAll("#password-rules li").forEach(el => {
            el.classList.remove("rule-pass");
            el.classList.add("rule-fail");
        });
    });

    document.getElementById("signup").addEventListener("submit", function (event) {
        event.preventDefault();

        const firstName       = document.getElementById("firstname").value.trim();
        const lastName        = document.getElementById("lastname").value.trim();
        const email           = document.getElementById("email").value.trim();
        const phone           = document.getElementById("phone").value.trim();
        const dob             = document.getElementById("dob").value;
        const username        = document.getElementById("username").value.trim();
        const password        = document.getElementById("password").value;
        const confirmPassword = document.getElementById("confirm-password").value;
        const terms           = document.getElementById("terms").checked;

        let isValid = true;

        if (firstName === "")                    { showError("firstname", "firstname-error"); isValid = false; }
        if (lastName === "")                     { showError("lastname", "lastname-error"); isValid = false; }
        if (!emailPattern.test(email))           { showError("email", "email-error"); isValid = false; }
        if (!phonePattern.test(phone))           { showError("phone", "phone-error"); isValid = false; }
        if (dob === "")                          { showError("dob", "dob-error"); isValid = false; }
        if (username === "")                     { showError("username", "username-error"); isValid = false; }
        if (!passwordPattern.test(password))     { document.getElementById("password").classList.add("invalid"); isValid = false; }
        if (password !== confirmPassword)        { showError("confirm-password", "confirm-password-error"); isValid = false; }
        if (!terms)                              { document.getElementById("terms-error").classList.add("visible"); isValid = false; }

        if (isValid) {
            alert("Form submitted successfully!\nRedirecting to the homepage...");
            window.location.href = "index.html";
        }
    });
</script>